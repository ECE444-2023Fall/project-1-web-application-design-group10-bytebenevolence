{% extends "base.html" %}
<link rel="stylesheet" type="text/css" href="../static/main.css" />
{% block title %}Dashboard{% endblock %} {% block page_content %}
<link rel="stylesheet" href="{{ url_for('static', filename='events.css') }}" />

<div class="events-container">
  {% if logged_in %}
  <h1><b>Events Dashboard</b></h1>

  <div class="events-search-container">
    <input class="searchbar" type="text" placeholder="Search for an Event" id = "searchbar" />
    <button class="button" style="margin-left: 5px" onclick="searchEvent()">Search</button>
  </div>

  <div class="events-filter-container">
    Start Date:
    <input class="date-selector" type="date" class="start-date">
    End Date:
    <input class="date-selector" type="date" class="end-date">
    <button class="button" style="margin-left: 5px">Reset Filters</button>
    <br/>
    <div style="margin-top: 5px;">
        Event Type:
        <select name="event-type" id="event-type">
        <option value="academic">Academic</option>
        <option value="arts">Arts</option>
        <option value="athletics">Athletics</option>
        <option value="career">Career</option>
        <option value="cultural">Cultural</option>
        <option value="health">Health</option>
        <option value="social">Social</option>
        <option value="music">Music</option>
        <option value="technology">Technology</option>
        <option value="science">Science</option>
        <option value="food">Food</option>
        <option value="environmental">Environmental</option>
        <option value="volunteer">Volunteer</option>
        <option value="travel">Travel</option>
        <option value="gaming">Gaming</option>
        <option value="fashion">Fashion</option>
        <option value="fitness">Fitness</option>
        <option value="business">Business</option>
        <option value="literature">Literature</option>
        <option value="film">Film</option>
        <option value="religious">Religious</option>
        <option value="other">Other</option>
        </select></div>

  </div>

  <div class="events-body">

    <div class="left-view"> 
        <h2>Discover Events</h2>

        <div class="discover-events-container">
            {% if UpcomingEvents %}
            {% for event in UpcomingEvents %}
            <div class="event-card">
                <div class="event-title" style="text-align: center;"><b>{{event.name}}</b><br/>{{event.type}} <br/></div>
                <br/>
                <b>Time: </b>{{event.time}}<br/>
                <b>Location: </b>{{event.place}}<br/><br/>
                <div class="register-link" style="text-align: center;"><a>Learn More/Register</a></div>
            </div>
            {% endfor %}
                {% else %}
                    <div class="no-events-text" style='text-align:center'>No events to show.</div>
            {%endif%}

        </div>

    </div>

    <div class="right-view">
        <h2>My Events:</h2>
        <div class="my-events">
            <br/>
            <div
            style="
                overflow: scroll;
                height: 200px;
                text-overflow: clip;
                white-space: nowrap;
            "
            >
            {% if MyEvents %}
            {% for event in MyEvents %}
            <div class="event-preview" style="margin-left: 30px">
                <b>{{event.name}} @ {{event.place}}</b> (Literature)<br/>
                <b>Time:</b> {{event.time}}<br/><br/> 
            </div>
            {% endfor %}
                {% else %}
                <div class="no-events-text" style='text-align:center'>No events to show.</div>
            {% endif %}


            </div>
        </div>
    

    <h2>Upcoming Events:</h2>
      <div class="upcoming-events">
        <br />
        
          {% if UpcomingEvents %}
          {% for event in UpcomingEvents[:3] %}
            <div class="event-preview" style="margin-left: 30px">
                <b>{{event.name}} @ {{event.place}}</b> (Literature)<br/>
                <b>Time:</b> {{event.time}}<br/><br/> 
            </div>
            {% endfor %}
                {% else %}
                <div class="no-events-text" style='text-align:center'>No events to show.</div>
            {% endif %}

      </div>
      <div class="calendar"><h2>Calendar</h2></div>
    </div>
  </div>

  </div>


  {% else %}
  <h1>Please <a href="/login">log in</a> first. </h1>
  
  {% endif %}
</div>
<script>
    function searchEvent() {
    fetch('/search', {
      method: 'POST', 
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({search_query: document.getElementById("searchbar").value })
    })
  }

</script>
{% endblock %}
